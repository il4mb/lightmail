[system]
group = lightmail
owner = lightmail

[database]
host = localhost
port = 3306
user = root
password = 
database = maildb
pool_size = 10

# Optional pool tuning (seconds)
# pool_idle_timeout = 300
# pool_max_lifetime = 3600
# connect_timeout = 10

[imap]
bind = 0.0.0.0
port = 143
ssl_port = 993
max_connections = 100
buffer_size = 8192
session_timeout = 1800
max_failed_attempts = 5
enable_ssl = true
tls_cert = /var/projects/lightmail/certs/cert.pem
tls_key = /var/projects/lightmail/certs/key.pem
tls_only = false
rate_limit_window_secs = 10
rate_limit_commands = 50

[lmtp]
# If Postfix is delivering via LMTP, keep the socket inside /var/spool/postfix (chroot-safe).
# For non-Postfix setups you can choose another local path.
socket = /var/spool/postfix/lightmail/lmtp.sock
# Max message size enforced by LMTP/APPEND paths (bytes)
max_message_size = 52428800

[pop3]
bind = 0.0.0.0
port = 110
ssl_port = 995
max_connections = 100
buffer_size = 8192
session_timeout = 1800
enable_ssl = true
tls_cert = /var/projects/lightmail/certs/cert.pem
tls_key = /var/projects/lightmail/certs/key.pem
tls_only = false

[smtp]
# Outbound SMTP client settings (used by the Admin API /admin/send)
host = 127.0.0.1
port = 25
smtps_port = 465
use_starttls = true
use_smtps = false
auto_tls_fallback = true
auth_method = plain   # plain|login


[smtp_server]
# Inbound SMTP/Submission server (RFC 5321 + submission)
# Note: there is NO single global username/password here.
# SMTP AUTH uses per-account credentials from the `accounts` table (same as IMAP/POP3).
bind = 0.0.0.0
port = 25
submission_port = 587
smtps_port = 465

# Enable TLS material for STARTTLS (ports 25/587) and implicit TLS (465)
enable_ssl = true
enable_starttls = true
tls_cert = /var/projects/lightmail/certs/cert.pem
tls_key = /var/projects/lightmail/certs/key.pem

# AUTH policy
enable_auth = true
require_auth_smtp = false
require_auth_submission = true
auth_require_tls = false

# SIZE extension limit (bytes)
max_message_size = 52428800

# Connection limiter
max_connections = 200

[logging]
path = /var/log/lightmail/lightmail.log
# Output JSON logs (true/false)
json = false
# Log level: trace|debug|info|warn|error
level = info

[s3]
endpoint = 
region = us-east-1
bucket = mails
access_key = 
secret_key = 
use_ssl = 1

[api]
bind = 0.0.0.0
port = 8080
token = secret

[antivirus]
enabled = false
host = localhost
port = 3310
mode = quarantine  # options: reject|quarantine|tag
[webhook]
# Optional: send HTTP POST notifications on selected events.
enabled = false
url = http://127.0.0.1:9000/lightmail/webhook
# If set, sent as: Authorization: Bearer <token>
token = ""
# Comma-separated list. Currently supported: message.delivered
events = message.delivered
timeout_ms = 2000

[garbage]
# Number of soft-deleted messages processed per batch
batch_size = 100
# Sleep when no work is found (seconds)
idle_seconds = 60
# Pause between batches (seconds)
pause_seconds = 5
